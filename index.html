<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Capybara Café</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f2e9e4;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
  }

  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  button {
    border: none;
    cursor: pointer;
    background: none;
    padding: 0;
    margin: 15px 0;
    transition: transform 0.2s ease;
  }

  button:hover {
    transform: scale(1.05);
  }

  #playBtn img, #settingsBtn img {
    width: 700px; /* CSS подгонка под экран */
    height: auto;
  }

  #settingsModal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -60%);
    background: #fff8f0;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    z-index: 100;
    width: 800px;
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: none;
  }

  #settingsModal.show {
    opacity: 1;
    transform: translate(-50%, -50%);
    pointer-events: auto;
  }

  .slider-container {
    margin: 15px 0;
    text-align: left;
  }

  .slider-container label {
    display: block;
    margin-bottom: 5px;
    font-size: 18px;
  }

  input[type=range] {
    width: 100%;
  }

  #fullscreenBtn, #languageBtn {
    width: 100px;
    height: 100px;
    margin: 10px;
    transition: transform 0.2s ease;
  }

  #fullscreenBtn:hover, #languageBtn:hover {
    transform: scale(1.1);
  }

  #closeSettings {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    border-radius: 10px;
    border: none;
    background: #e0c097;
    transition: background 0.2s ease;
  }

  #closeSettings:hover {
    background: #d4ab7c;
  }

  #overlay {
    display: none;
    position: fixed;
    top:0; left:0; width:100%; height:100%;
    background: rgba(0,0,0,0.4);
    z-index: 50;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  #overlay.show {
    display: block;
    opacity: 1;
  }
</style>
</head>
<body>

<div class="container">
  <button id="playBtn"><img src="PlayEng.png" alt="Play"></button>
  <button id="settingsBtn"><img src="SettingsEng.png" alt="Settings"></button>
</div>

<div id="overlay"></div>

<div id="settingsModal">
  <div class="slider-container">
    <label for="musicSlider">Music: <span id="musicValue">85</span></label>
    <input type="range" id="musicSlider" min="0" max="100">
  </div>
  <div class="slider-container">
    <label for="soundSlider">Sound: <span id="soundValue">100</span></label>
    <input type="range" id="soundSlider" min="0" max="100">
  </div>
  <div style="display:flex; justify-content:center; margin-top:20px;">
    <button id="fullscreenBtn"><img src="Fullscreen.png" alt="Fullscreen"></button>
    <button id="languageBtn"><img src="PlayEng.png" alt="Language"></button>
  </div>
  <div style="text-align:center;">
    <button id="closeSettings">Close</button>
  </div>
</div>

<script>
  // ======= LocalStorage defaults =======
  if(localStorage.musicVolume === undefined) localStorage.musicVolume = 85;
  if(localStorage.soundVolume === undefined) localStorage.soundVolume = 100;
  if(localStorage.fullscreen === undefined) localStorage.fullscreen = false;
  if(localStorage.language === undefined) localStorage.language = "eng";

  // ======= Elements =======
  const playBtn = document.getElementById('playBtn');
  const settingsBtn = document.getElementById('settingsBtn');
  const overlay = document.getElementById('overlay');
  const settingsModal = document.getElementById('settingsModal');
  const closeSettings = document.getElementById('closeSettings');
  const musicSlider = document.getElementById('musicSlider');
  const soundSlider = document.getElementById('soundSlider');
  const musicValue = document.getElementById('musicValue');
  const soundValue = document.getElementById('soundValue');
  const fullscreenBtn = document.getElementById('fullscreenBtn');
  const languageBtn = document.getElementById('languageBtn');

  // ======= Initialize sliders =======
  musicSlider.value = localStorage.musicVolume;
  soundSlider.value = localStorage.soundVolume;
  musicValue.textContent = musicSlider.value;
  soundValue.textContent = soundSlider.value;

  // ======= Settings open/close =======
  function openSettings() {
    settingsModal.classList.add('show');
    overlay.classList.add('show');
  }

  function closeSettingsFunc() {
    settingsModal.classList.remove('show');
    overlay.classList.remove('show');
  }

  settingsBtn.addEventListener('click', openSettings);
  closeSettings.addEventListener('click', closeSettingsFunc);
  overlay.addEventListener('click', closeSettingsFunc);

  // ======= Sliders change =======
  musicSlider.addEventListener('input', () => {
    musicValue.textContent = musicSlider.value;
    localStorage.musicVolume = musicSlider.value;
  });

  soundSlider.addEventListener('input', () => {
    soundValue.textContent = soundSlider.value;
    localStorage.soundVolume = soundSlider.value;
  });

  // ======= Fullscreen =======
  fullscreenBtn.addEventListener('click', () => {
    if(!document.fullscreenElement) {
      document.documentElement.requestFullscreen();
      localStorage.fullscreen = true;
    } else {
      if(document.exitFullscreen) {
        document.exitFullscreen();
        localStorage.fullscreen = false;
      }
    }
  });

  // ======= Language toggle =======
  function updateLanguage() {
    if(localStorage.language === "eng") {
      playBtn.firstElementChild.src = "PlayEng.png";
      settingsBtn.firstElementChild.src = "SettingsEng.png";
      languageBtn.firstElementChild.src = "PlayEng.png";
    } else {
      playBtn.firstElementChild.src = "PlayRu.png";
      settingsBtn.firstElementChild.src = "SettingsRu.png";
      languageBtn.firstElementChild.src = "PlayRu.png";
    }
  }

  languageBtn.addEventListener('click', () => {
    if(localStorage.language === "eng") localStorage.language = "ru";
    else localStorage.language = "eng";
    updateLanguage();
  });

  updateLanguage();

  // ======= Play button =======
  playBtn.addEventListener('click', () => {
    window.location.href = 'cafe.html';
  });

</script>

</body>
</html>
